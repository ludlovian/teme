var n,t="function"==typeof Symbol?Symbol:function(n){return"$teme$_"+n},r=t("value"),e=t("parents"),i=t("children"),o=t("function");function u(){}function c(n){var t=f(n);return t.end=f(!1),t.end[i].add(t),t}function f(n){var t;function f(){return 0!==arguments.length&&a(f,arguments[0]),f[r]}return Object.defineProperties(f,((t={})[r]={value:n,configurable:!0,writable:!0},t[i]={value:new Set,configurable:!0,writable:!0},t[e]={value:[],configurable:!0,writable:!0},t[o]={value:u,configurable:!0,writable:!0},t)),Object.setPrototypeOf(f,c.prototype),f}function a(t,e){var o=null==n;if(o&&(n=function(n){var t=[],r=new Set;return function n(e){r.has(e)||(r.add(e),e[i].forEach(n),t.push({stream:e,changed:[]}))}(n),t.reverse()}(t)),t[r]=e,Array.from(t[i]).forEach(function(r){if(r.end===t)return h(r);var e=n.find(function(n){return n.stream===r});if(!e)return n.push({stream:r,changed:[t]});e.changed.push(t)}),o){for(var u=n.shift();u;u=n.shift())0!==u.changed.length&&s(u.stream,u.changed);n=void 0}}function s(n,t){var r=n[e].concat([n],[t]),i=n[o].apply(n,r);null!=i&&a(n,i)}function h(n){n[e].forEach(function(t){return t[i].delete(n)}),n[e]=[],n.end[e]=[],n.end[r]=!0,Array.from(n[i]).forEach(h)}function p(n,t){return n===t}c.combine=function(n,t,r){void 0===r&&(r={});var u=c(r.initial);return u[o]=n,u[e]=t.slice(),t.forEach(function(n){return n[i].add(u)}),r.skip||s(u,t),u},c.prototype={subscribe:function(n){var t=this.map(n,{skip:!0});return function(){return t.end(!0)}},map:function(n,t){return c.combine(function(t){return n(t())},[this],t)},clone:function(){return this.map(function(n){return n})},merge:function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return c.merge.apply(c,[this].concat(n))},scan:function(n,t){return this.map(function(r){return t=n(t,r)},{skip:!0,initial:t})},dedupe:function(n,t){var r;return n&&"object"==typeof n&&(t=n,n=void 0),n=n||p,(t=t||{}).skip||(r=this()),c.combine(function(t,e){var i=t();n(r,i)||e(i),r=i},[this],{skip:!0,initial:r})},when:function(n){var t,r,e=function(){return new Promise(function(n){t=n})},i=e();return n(this())&&(r=!0,t()),this.scan(function(i,o){return n(o)?r||(r=!0,t()):r&&(r=!1,i=e()),i},i)},changed:function(){var n=this;return new Promise(function(t){var r=n.subscribe(function(n){t(n),r()})})},throttle:function(n){var t,r,e=this,i=function(){u(e()),r=!1},o=function(){return setTimeout(function(){r?(i(),t=o()):t=null},n)},u=c.combine(function(){t?r=!0:(i(),t=o())},[this],{skip:!0});return u},debounce:function(n){var t,r=this,e=function(){i(r()),t=null},i=c.combine(function(){t&&clearTimeout(t),t=setTimeout(e,n)},[this],{skip:!0});return i}},c.merge=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return c.combine(function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];var r=n.pop(),e=n.pop();r.forEach(function(n){return e(n())})},n,{skip:!0})},c.fromPromise=function(n){var t=c();return n.then(function(n){t(n),t.end(!0)},function(r){if(!(r instanceof Error)){var e=new Error("Rejected promise");e.promise=n,e.reason=r,r=e}t(r),t.end(!0)}),t},Object.setPrototypeOf(c.prototype,Function.prototype);export default c;
//# sourceMappingURL=index.mjs.map
